@using WineryApp.Data
@using WineryApp.Data.Entiteti
@model WineryApp.Data.Entiteti.Zadatak

@{
    ViewData["Title"] = "Detalji zadatka";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var statusZadatka = Model.StatusZadatka == (int) StatusZadatka.UTijeku ? "U tijeku" : "Završeno";
    var podrum = Model.PodrumId.HasValue ? Model.Podrum.ŠifraPodruma : "Općenito";
    var spremnik = Model.SpremnikId.HasValue ? Model.Spremnik.ŠifraSpremnika : "Općenito";
    var zaposlenik = $"{Model.ZaduženiZaposlenikNavigation.Ime} {Model.ZaduženiZaposlenikNavigation.Prezime}";
    var aditiv = Model.AditivId.HasValue ? Model.Aditiv.ImeAditiva : "Ne koristi se aditiv";
}

    <div class="container-fluid blur-box">
        <br />

        <div class="row justify-content-between">
            <div>
                <h2 class="ml-3">@Model.ImeZadatka</h2>
                <h4 class="ml-3">@Model.KategorijaZadatka.ImeKategorije</h4>
            </div>

            <div>
                <a class="btn btn-outline-primary" asp-action="Edit" asp-route-id="@Model.ZadatakId" asp-route-returnUrl="@Context.Request.Path.ToString()">Uredi</a>
                <a class="btn btn-outline-danger mr-3" asp-action="Nazad" asp-route-returnUrl="@ViewBag.returnUrl">Natrag</a>
            </div>
        </div>

        <hr />

        <dl class="row">
            <dt class="col-2">Status zadatka:</dt>
            <dd class="col-10">@statusZadatka</dd>
        </dl>
        
        <hr/>

        <dl class="row">
            <dt class="col-2">Početak zadatka:</dt>
            <dd class="col-2">@Model.PočetakZadatka.ToString("dd.MM.yyyy")</dd>
            <dt class="col-2">Šifra podruma:</dt>
            <dd class="col-2">@podrum</dd>
            <dt class="col-2">Zaduženi zaposlenik:</dt>
            <dd class="col-2">@zaposlenik</dd>
        </dl>

        <hr />

        <dl class="row">
            <dt class="col-2">Rok zadatka:</dt>
            <dd class="col-2">@Model.RokZadatka.ToString("dd.MM.yyyy")</dd>
            <dt class="col-2">Šifra spremnika:</dt>
            <dd class="col-2">@spremnik</dd>
            <dt class="col-2">Aditiv:</dt>
            <dd class="col-2">@aditiv</dd>
        </dl>

        <hr />

        <dl class="row">
            <dt class="col-2">Bilješke:</dt>
            <dd class="col-10"><p style="white-space: pre-line">@Model.Bilješke</p></dd>
        </dl>

        <hr />
    </div>
