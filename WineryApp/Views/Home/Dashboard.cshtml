@using WineryApp.Data.Entiteti
@model List<WineryApp.Data.Entiteti.Zadatak>
@{
    ViewData["Title"] = "Pregled";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@if (Model.Count != 0)
{
<br />
<h1 class="d-flex justify-content-center">Trenutno aktivni zadaci</h1>
<hr />

<div class="p-3"></div>
<div class="container-fluid blur-box">
    <table class="table">
        <thead>
            <tr>
                <th>Naziv zadatka</th>
                <th>Vrsta zadatka</th>
                <th>Početak zadatka</th>
                <th>Rok zadatka</th>
                <th>Odgovoran</th>
                <th>Status zadatka</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var zadatak in Model)
                {
                    var imePrezime = zadatak.ZaduženiZaposlenikNavigation.Ime + " " + zadatak.ZaduženiZaposlenikNavigation.Prezime;
                    var status = zadatak.StatusZadatka.Value == (int)StatusZadatka.UTijeku ? "U tijeku" : "Zavrseno";
            <tr>
                <td>@zadatak.ImeZadatka</td>
                <td>@zadatak.KategorijaZadatka.ImeKategorije</td>
                <td>@($"{zadatak.PočetakZadatka:d/M/yyyy}")</td>
                <td>@($"{zadatak.RokZadatka:d/M/yyyy}")</td>
                <td>@imePrezime</td>
                <td>@status</td>
            </tr>
                }
        </tbody>
    </table>
</div>
}
